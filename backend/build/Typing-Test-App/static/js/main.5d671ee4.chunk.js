(this["webpackJsonptyping-test-app"]=this["webpackJsonptyping-test-app"]||[]).push([[0],{109:function(e,t,a){e.exports=a(141)},114:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n,o,r,s,l,i,u=a(0),c=a.n(u),d=a(35),h=a.n(d),m=(a(114),a(105)),p=(a(115),a(19)),g=a(22),v=a(32),E=a(3),b=a(6),f=a(7),y=a(4),q=a(5),w=a(33),A=a(18),k=a(46),C=a(15),_=a(78),S=a(61),Q=a(17),j=a(13),P=a(26),O=a(16),T=a.n(O),B=P.b.div(n||(n=Object(w.a)(["\n  background: ",";\n  padding: 24px;\n  border-radius: 5px;\n  justify-content: center;\n  flex-direction: column;\n  width: 100%;\n  min-height: 100px;\n"])),(function(e){return e.theme.colors.cardBackground})),M=a(103),V=P.b.input.attrs((function(e){return{type:"text"}}))(o||(o=Object(w.a)(["\n    background: white;\n    border-radius: 5px;\n    border: 1px solid darkgray;\n\n    :: disabled\n"]))),I=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).onInputChange=n.onInputChange.bind(Object(f.a)(n)),n.compare=n.compare.bind(Object(f.a)(n)),n.resetTest=n.resetTest.bind(Object(f.a)(n)),n.endTest=n.endTest.bind(Object(f.a)(n)),n.startTimer=n.startTimer.bind(Object(f.a)(n)),n.calculateWPM=n.calculateWPM.bind(Object(f.a)(n)),n.calculateHighScore=n.calculateHighScore.bind(Object(f.a)(n)),n.backspace=n.backspace.bind(Object(f.a)(n)),n.escFunction=n.escFunction.bind(Object(f.a)(n)),n.debugToggle=n.debugToggle.bind(Object(f.a)(n)),n.renderTooltip=n.renderTooltip.bind(Object(f.a)(n)),n.newTest=n.newTest.bind(Object(f.a)(n)),n.sendHighscores=n.sendHighscores.bind(Object(f.a)(n)),n.renderSpinner=n.renderSpinner.bind(Object(f.a)(n)),n.state={quote:[],quote_Title:"",quote_body:"",quote_author:"",user_input:"",quote_words:[],char_array:[],current_quote_char:"",typed_chars:"",current_quote_word:"",count:0,error_count:0,total_error_count:0,input_disabled:!1,quote_left:"",quote_right:"",quote_error:"",quote_start:"",err_arr:"",quote_class:"quote-current",tInterval:"",seconds:0,netWPM:0,accuracy:0,highestAcc:0,highestWPM:0,quote_score:0,quoteWPM:0,quoteAcc:0,quoteID:0,apiUrl:"",token:"",user:{},debug:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="";t=null!=this.props.location.state?this.props.location.state.id:"random";var a="";if(this.setState((function(e){return{apiUrl:"https://typingtest.jdoyle.ie"}})),a="https://typingtest.jdoyle.ie",T.a.get(a+"/quotes/"+t).then((function(t){e.setState((function(e){return{quote_Title:t.data.quoteTitle,quote_body:t.data.quoteBody,char_array:Array.from(t.data.quoteBody),current_quote_char:Array.from(t.data.quoteBody)[0],quote_start:t.data.quoteBody,quote_author:t.data.quoteAuthor,quote_score:t.data.quoteScore,quoteWPM:t.data.highWPMScore,quoteAcc:t.data.highAccScore,quoteID:t.data._id}}))})).catch((function(e){console.log(e)})),localStorage.getItem("beepboop")){var n=localStorage.getItem("beepboop");this.setState({token:n}),T.a.get(a+"/user/profile",{headers:{"auth-token":n}}).then((function(t){e.setState({user:t.data})}))}document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"startTimer",value:function(){var e=this.state.seconds+1;this.setState((function(t){return{seconds:e}}))}},{key:"escFunction",value:function(e){27===e.keyCode&&this.resetTest()}},{key:"debugToggle",value:function(){this.setState((function(e){return{debug:!e.debug}}))}},{key:"onInputChange",value:function(e){var t=this;if(this.state.count===this.state.char_array.length)return this.endTest(),void console.log("testing jenkins");if(8!==e.keyCode&&0===e.location){if(0===this.state.count){var a=setInterval(this.startTimer,1e3);this.setState((function(e){return{quote_start:"",seconds:0,tInterval:a}}))}this.setState({user_input:e.key},(function(){return t.compare(t.state.current_quote_char)}))}else 8===e.keyCode&&""!==this.state.err_arr&&this.state.error_count>0&&(this.state.error_count>0?this.setState((function(e){return{error_count:e.error_count-1}}),(function(){return t.backspace()})):this.backspace())}},{key:"backspace",value:function(){this.setState((function(e){return{err_arr:e.err_arr.slice(0,e.err_arr.length-1),count:e.count-1,current_quote_char:e.char_array[e.count-1],quote_left:e.typed_chars.slice(0,e.typed_chars.length-e.err_arr.length),typed_chars:e.typed_chars.slice(0,-1),quote_right:e.char_array.slice(e.count,e.char_array.length)}}))}},{key:"compare",value:function(e){var t=this;e===this.state.user_input?(this.state.count>=this.state.char_array.length-1?this.setState((function(e){return{typed_chars:e.typed_chars+e.user_input}}),(function(){return t.endTest()})):this.setState((function(e){return{current_quote_char:e.char_array[e.count+1],count:e.count+1,typed_chars:e.typed_chars+e.user_input,quote_right:e.char_array.slice(e.count+2,e.char_array.length),user_input:"",quote_left:e.typed_chars+e.user_input,err_arr:"",quote_class:"quote-current"}})),document.getElementById("input").value=""):this.setState((function(e){return{err_arr:e.err_arr+e.char_array[e.count],current_quote_char:e.char_array[e.count+1],count:e.count+1,quote_class:"quote-warning",typed_chars:e.typed_chars+e.char_array[e.count],quote_error:e.err_arr,quote_right:e.char_array.slice(e.count+2,e.char_array.length),error_count:e.error_count+1,total_error_count:e.total_error_count+1}}))}},{key:"newTest",value:function(){var e=this;this.setState({quote_Title:"",quote_author:"",quote_body:"",char_array:[]}),T.a.get(this.state.apiUrl+"/quotes/random").then((function(t){e.setState((function(e){return{quote_Title:t.data.quoteTitle,quote_body:t.data.quoteBody,char_array:Array.from(t.data.quoteBody),current_quote_char:Array.from(t.data.quoteBody)[0],quote_start:t.data.quoteBody,quote_author:t.data.quoteAuthor,quoteWPM:t.data.highWPMScore,quoteAcc:t.data.highAccScore,quoteID:t.data._id}}))})).catch((function(e){console.log(e)})),this.resetTest()}},{key:"resetTest",value:function(){var e,t,a=this.state.quote_body;e=a.split(" "),t=Array.from(a),clearInterval(this.state.tInterval),document.getElementById("input").value="",document.getElementById("input").focus(),this.setState((function(a){return{quote_Title:a.quote_Title,quote_body:a.quote_body,quote_words:e,current_quote_word:e[0],char_array:t,quote_start:a.quote_body,current_quote_char:a.char_array[0],err_arr:"",user_input:"",quote_left:"",quote_right:"",typed_chars:"",error_count:0,quote_class:"quote_current",quote_error:"",total_error_count:0,count:0,seconds:0,input_disabled:!1}}))}},{key:"endTest",value:function(){var e=this;clearInterval(this.state.tInterval);var t=this.state.char_array.length-this.state.total_error_count,a=this.state.netWPM,n=this.state.accuracy;document.activeElement.blur(),document.getElementById("input").focus(),this.setState((function(a){return{error_count:a.error_count,accuracy:Math.ceil(t/a.char_array.length*100),input_disabled:!0,current_quote_char:"",quote_left:a.quote_body,seconds:0,err_arr:"",netWPM:Math.ceil(e.calculateWPM())}}),(function(){return e.calculateHighScore(n,a)}))}},{key:"calculateHighScore",value:function(e,t){var a=this,n=this.state.accuracy,o=this.state.netWPM,r=0,s=0;if(o>t&&(this.setState({highestAcc:n,highestWPM:o}),r=o,s=n,""!==this.state.token&&(r>this.state.user.personalBestWPM&&(console.log("you were better"),this.setState((function(e){return{user:Object(v.a)(Object(v.a)({},a.state.user),{},{personalBestAcc:s,personalBestWPM:r})}}),(function(){return a.sendHighscores(a.state.user)}))),o>=this.state.quoteWPM&&this.setState({quoteWPM:r,quoteAcc:s},(function(){return a.sendQuoteScores()})))),""!==this.state.token){var l={_id:this.state.user._id,wpm:o,acc:n};console.log(l),T.a.post(this.state.apiUrl+"/user/updateScores",l,{headers:{"auth-token":this.state.token}}).then((function(e){console.log(e.data.latestWPMScores)})).catch((function(e){return e}))}}},{key:"sendHighscores",value:function(e){console.log(e),T.a.post(this.state.apiUrl+"/user/updateHS",e,{headers:{"auth-token":this.state.token}}).then((function(e){return console.log(e.data)})).catch((function(e){return e}))}},{key:"sendQuoteScores",value:function(){var e={quoteWPM:this.state.quoteWPM,quoteAcc:this.state.quoteAcc,_id:this.state.quoteID};T.a.post(this.state.apiUrl+"/quotes/updateHS",e,{headers:{"auth-token":this.state.token}}).catch((function(e){return e}))}},{key:"calculateWPM",value:function(){var e=this.state.seconds/60,t=this.state.error_count;return this.state.typed_chars.length/5/e-t/e}},{key:"renderTooltip",value:function(e){if(null!=e.popper.state){if("restartBtn"===e.popper.state.elements.reference.id)return c.a.createElement(S.a,Object.assign({id:"button-tooltip"},e),"Restart Test");if("newTestBtn"===e.popper.state.elements.reference.id)return c.a.createElement(S.a,Object.assign({id:"button-tooltip"},e),"Start New Test");if("debugBtn"===e.popper.state.elements.reference.id)return c.a.createElement(S.a,Object.assign({id:"button-tooltip"},e),"Show debug Info")}return c.a.createElement(S.a,e,"tes")}},{key:"renderSpinner",value:function(){return this.state.quote_Title?c.a.createElement(c.a.Fragment,null):c.a.createElement(M.a,{animation:"border"})}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("h4",null,this.state.quote_Title," - ",this.state.quote_author),c.a.createElement(A.a,{variant:"secondary"},c.a.createElement("span",null,this.renderSpinner()),c.a.createElement("span",{className:"quote-left"},this.state.quote_left),c.a.createElement("span",{className:"quote-error"},this.state.err_arr),c.a.createElement("span",{className:this.state.quote_class},this.state.current_quote_char),c.a.createElement("span",{className:"quote-start"},this.state.quote_start.slice(1)),c.a.createElement("span",{className:"quote-right"},this.state.quote_right),c.a.createElement("hr",null),c.a.createElement("span",null,"Best Score: ",this.state.quoteWPM,"WPM ",this.state.quoteAcc,"% Accuracy"))),c.a.createElement(j.a,{sm:4},c.a.createElement("h4",null,"High Scores"),c.a.createElement(A.a,{variant:"info"},c.a.createElement("span",null,"WPM : ",this.state.highestWPM," ",c.a.createElement("br",null),"Accuracy : ",this.state.highestAcc,"% ",c.a.createElement("br",null))))),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,c.a.createElement("h5",null,"Current Character: ",this.state.current_quote_char))),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement(V,{onKeyDown:this.onInputChange,id:"input",disabled:this.state.input_disabled}),c.a.createElement(_.a,{placement:"top",delay:{show:250,hide:400},overlay:this.renderTooltip,name:"restartOverlay"},c.a.createElement(C.a,{onClick:this.resetTest,style:{marginLeft:10},variant:"secondary",id:"restartBtn"},c.a.createElement("svg",{className:"bi bi-arrow-repeat",width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M2.854 7.146a.5.5 0 00-.708 0l-2 2a.5.5 0 10.708.708L2.5 8.207l1.646 1.647a.5.5 0 00.708-.708l-2-2zm13-1a.5.5 0 00-.708 0L13.5 7.793l-1.646-1.647a.5.5 0 00-.708.708l2 2a.5.5 0 00.708 0l2-2a.5.5 0 000-.708z",clipRule:"evenodd"}),c.a.createElement("path",{fillRule:"evenodd",d:"M8 3a4.995 4.995 0 00-4.192 2.273.5.5 0 01-.837-.546A6 6 0 0114 8a.5.5 0 01-1.001 0 5 5 0 00-5-5zM2.5 7.5A.5.5 0 013 8a5 5 0 009.192 2.727.5.5 0 11.837.546A6 6 0 012 8a.5.5 0 01.501-.5z",clipRule:"evenodd"})))),c.a.createElement(_.a,{placement:"top",delay:{show:250,hide:400},overlay:this.renderTooltip},c.a.createElement(C.a,{onClick:this.newTest,variant:"info",style:{marginLeft:10},id:"newTestBtn",name:"newTestBtn"},c.a.createElement("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-plus",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z"}),c.a.createElement("path",{fillRule:"evenodd",d:"M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z"}))))),c.a.createElement(j.a,{sm:4},c.a.createElement(_.a,{placement:"left",delay:{show:250,hide:400},overlay:this.renderTooltip},c.a.createElement(C.a,{onClick:this.debugToggle,variant:"outline-warning",style:{float:"right"},id:"debugBtn",name:"debugBtn"},c.a.createElement("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-bug",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6H4a3.99 3.99 0 0 1 1.333-2.982A3.983 3.983 0 0 1 8 2c1.025 0 1.959.385 2.666 1.018A3.989 3.989 0 0 1 12 6z"})))))),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement(k.a,{in:this.state.input_disabled},c.a.createElement("div",{id:"results"},c.a.createElement(A.a,{variant:"success"},c.a.createElement(A.a.Heading,null,"Well Done!"),c.a.createElement("p",null,"Here are your results:",c.a.createElement("br",null),"WPM : ",this.state.netWPM," ",c.a.createElement("br",null),"Accuracy : ",this.state.accuracy,"% ",c.a.createElement("br",null),"Errors : ",this.state.total_error_count,c.a.createElement("br",null),"Corrected Errors : ",this.state.error_count))))),c.a.createElement(j.a,{sm:4},c.a.createElement(k.a,{in:this.state.debug},c.a.createElement("div",null,c.a.createElement(A.a,{variant:"warning"},c.a.createElement(A.a.Heading,null,"Debug"),c.a.createElement("p",null,"Error array : ",this.state.err_arr,c.a.createElement("br",null),"quote length : ",this.state.char_array.length,c.a.createElement("br",null),"Input count : ",this.state.count,c.a.createElement("br",null),"Error Count : ",this.state.error_count,c.a.createElement("br",null),"Total Error Count : ",this.state.total_error_count,c.a.createElement("br",null),"Previous character : ",this.state.char_array[this.state.count-1],c.a.createElement("br",null),"Current character : ",this.state.char_array[this.state.count],c.a.createElement("br",null),"Next character : ",this.state.char_array[this.state.count+1],c.a.createElement("br",null),"Quote left : ",this.state.quote_left,c.a.createElement("br",null),"Quote green : ",this.state.current_quote_char,c.a.createElement("br",null),"Quote right : ",this.state.quote_right,c.a.createElement("br",null),"Quote error : ",this.state.quote_error))))))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),x=a(14),U=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).checkLogin=n.checkLogin.bind(Object(f.a)(n)),n.onChangeQuoteTitle=n.onChangeQuoteTitle.bind(Object(f.a)(n)),n.onChangeQuoteBody=n.onChangeQuoteBody.bind(Object(f.a)(n)),n.onChangeQuoteAuthor=n.onChangeQuoteAuthor.bind(Object(f.a)(n)),n.validateField=n.validateField.bind(Object(f.a)(n)),n.validateForm=n.validateForm.bind(Object(f.a)(n)),n.addQuote=n.addQuote.bind(Object(f.a)(n)),n.state={loggedIn:!1,quoteTitleValid:!1,quoteBodyValid:!1,quoteAuthorValid:!1,formValid:!1,formErrors:{quoteTitle:"",quoteBody:"",quoteAuthor:""},formValidAndUser:!1,userName:"",id:"",quoteTitle:"",quoteBody:"",quoteAuthor:""},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem("beepboop")){this.checkLogin();var t=localStorage.getItem("beepboop"),a="";a="https://typingtest.jdoyle.ie",T.a.get(a+"/user/profile",{headers:{"auth-token":t}}).then((function(t){console.log(e.state),t.data&&e.setState({userName:t.data.userName,id:t.data._id})}))}}},{key:"addQuote",value:function(e){var t=this;e.preventDefault();var a={quoteTitle:this.state.quoteTitle,quoteBody:this.state.quoteBody,quoteAuthor:this.state.quoteAuthor,quoteUser:this.state.userName},n=localStorage.getItem("beepboop"),o="";o="https://typingtest.jdoyle.ie",T.a.post(o+"/quotes/add",a,{headers:{"auth-token":n}}).then((function(e){var a={userId:t.state.id,quoteId:e.data};T.a.post(o+"/user/addQuote",a,{headers:{"auth-token":n}}),t.props.history.push({pathname:"/profile"})})).catch((function(e){return e}))}},{key:"checkLogin",value:function(){this.setState({loggedIn:!0})}},{key:"onChangeQuoteTitle",value:function(e){var t=this,a=e.target.name;this.setState({quoteTitle:e.target.value},(function(){t.validateField(a,t.state.quoteTitle)}))}},{key:"onChangeQuoteBody",value:function(e){var t=this,a=e.target.name;this.setState({quoteBody:e.target.value},(function(){t.validateField(a,t.state.quoteBody)}))}},{key:"onChangeQuoteAuthor",value:function(e){var t=this,a=e.target.name;this.setState({quoteAuthor:e.target.value},(function(){t.validateField(a,t.state.quoteAuthor)}))}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.quoteTitleValid,o=this.state.quoteBodyValid,r=this.state.quoteAuthorValid;switch(e){case"quoteTitle":n=t.length>=0&&t.length<40,a.quoteTitle=n?"":" must not be empty or greater than 20 characters.";break;case"quoteBody":o=t.length>=200&&t.length<=350,a.quoteBody=o?"":" is too short";break;case"quoteAuthor":if(0===t.length){r=!0,this.setState((function(e){return{quoteAuthor:e.username}}),(function(){a.quoteAuthor=""}));break}if(t.length<=10){r=!0,a.quoteAuthor=r?"":" is short long";break}}this.setState({formErrors:a,quoteTitleValid:n,quoteBodyValid:o,quoteAuthorValid:r},this.validateForm)}},{key:"validateForm",value:function(){console.log("quotetitle "+this.state.quoteTitleValid),console.log("quoteauth "+this.state.quoteAuthorValid),console.log("quoteboy "+this.state.quoteBodyValid),this.setState({formValid:this.state.quoteTitleValid&&this.state.quoteBodyValid&&this.state.quoteAuthorValid,formValidAndUser:this.state.formValid&&this.state.loggedIn})}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,null,c.a.createElement("h4",null,"Create Quote"),c.a.createElement("br",null),c.a.createElement(A.a,{variant:"secondary"},c.a.createElement(x.a,null,c.a.createElement(A.a.Heading,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{m:"auto"},c.a.createElement(x.a.Control,{value:this.state.quoteTitle,type:"text",size:"lg",onChange:this.onChangeQuoteTitle,name:"quoteTitle",placeholder:"Quote Title",isValid:!this.state.quoteTitleValid,isInvalid:!this.state.quoteTitleValid})),c.a.createElement(j.a,{xs:"auto"}," -"),c.a.createElement(j.a,{xs:"auto"},c.a.createElement(x.a.Control,{value:this.state.quoteAuthor,type:"text",size:"lg",onChange:this.onChangeQuoteAuthor,name:"quoteAuthor",placeholder:"Quote Author",isValid:!this.state.quoteAuthorValid,isInvalid:!this.state.quoteAuthorValid})))),c.a.createElement(x.a.Text,{className:"text-muted",style:{float:"left"}},"Quote titles must be shorter than 40 characters."),c.a.createElement(x.a.Text,{className:"text-muted",style:{float:"right"}},"Add the original Author of the Quote."),c.a.createElement(x.a.Control,{value:this.state.quoteBody,id:"quoteBody",name:"quoteBody",as:"textarea",rows:"4",onChange:this.onChangeQuoteBody,placeholder:"Main Body of Quote",isValid:!this.state.quoteBodyValid,isInvalid:!this.state.quoteBodyValid}),c.a.createElement(x.a.Text,{className:"text-muted"},"Main text of the Quote must be between 200 and 350 characters."),c.a.createElement(x.a.Text,{className:"text-muted"},"All Quotes will be approved by an admin before they can be used for testing."))),c.a.createElement(C.a,{type:"submit",variant:"info",onClick:this.addQuote,disabled:!this.state.formValidAndUser},"Create Quote"),c.a.createElement(x.a.Text,{className:"text-muted"},"You must be logged in to add a Quote.")))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),L=P.b.input.attrs((function(e){return{type:"text",placeholder:" Search: Title, Author, User"}}))(r||(r=Object(w.a)(["\n    background: white;\n    border-radius: 5px;\n    border: 1px solid darkgray;\n    height : 35px;\n    margin-left : 80px;\n    width : 230px;\n    float: right;\n    :: disabled\n"]))),N=function(e){return c.a.createElement("div",null,c.a.createElement(A.a,{variant:"secondary"},c.a.createElement(p.b,{to:{pathname:"/",state:{id:e.quote._id}},style:{color:"#202326"}},c.a.createElement(A.a.Heading,null,e.quote.quoteTitle," -",e.quote.quoteAuthor)),c.a.createElement("span",null,e.quote.quoteBody),c.a.createElement("hr",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("span",null,"Added by: ",c.a.createElement(A.a.Link,null,e.quote.quoteUser)),c.a.createElement("span",{style:{marginLeft:10}},"Rating : ",e.quote.quoteScore),c.a.createElement("span",{style:{marginLeft:10}},"High Score : ",e.quote.highWPMScore,"WPM ",e.quote.highAccScore,"% Accuracy")),c.a.createElement(j.a,{sm:4},c.a.createElement("div",{style:{float:"right"}},c.a.createElement(A.a.Link,{variant:"outline-seconary"},"Suggest Edit"))))),c.a.createElement("br",null))},F=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).search=n.search.bind(Object(f.a)(n)),n.quotesList=n.quotesList.bind(Object(f.a)(n)),n.state={quotes:[],search:""},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="";t="https://typingtest.jdoyle.ie",T.a.get(t+"/quotes/approved").then((function(t){e.setState({quotes:t.data})})).catch((function(e){console.log(e)}))}},{key:"quotesList",value:function(e){return e.map((function(e,t){return c.a.createElement(N,{quote:e,key:t,index:t})}))}},{key:"search",value:function(){this.setState({search:document.getElementById("searchBar").value})}},{key:"render",value:function(){var e=this,t=this.state.quotes.filter((function(t){return-1!==t.quoteTitle.toLowerCase().indexOf(e.state.search)||-1!==t.quoteAuthor.toLowerCase().indexOf(e.state.search)||-1!==t.quoteUser.indexOf(e.state.search)}));return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("h4",null,"Quotes")),c.a.createElement(j.a,{sm:4},c.a.createElement(L,{id:"searchBar",onChange:this.search}))),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,this.quotesList(t)))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),W=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).login=n.login.bind(Object(f.a)(n)),n.onChangeLoginUsername=n.onChangeLoginUsername.bind(Object(f.a)(n)),n.onChangeLoginPassword=n.onChangeLoginPassword.bind(Object(f.a)(n)),n.state={inputEmail:"",inputUsername:"",inputPassword:"",isEmail:!1,formErrors:{username:"",email:"",password:""},usernameValid:!1,emailValid:!1,passwordValid:!1,formValid:!1,loggedInUser:{},error:!1},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onChangeLoginUsername",value:function(e){var t=this,a=e.target.name;this.setState({inputUsername:e.target.value},(function(){t.validateField(a,t.state.inputUsername)}))}},{key:"onChangeLoginPassword",value:function(e){var t=this,a=e.target.name;this.setState({inputPassword:e.target.value},(function(){t.validateField(a,t.state.inputPassword)}))}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.passwordValid,o=this.state.usernameValid;switch(e){case"Password":n=t.length>=6,a.password=n?"":" is too short";break;case"Username":o=t.length>=4,a.username=o?"":" is too short"}this.setState({formErrors:a,usernameValid:o,passwordValid:n},this.validateForm)}},{key:"login",value:function(e){var t=this;e.preventDefault();var a={userName:this.state.inputUsername,userPassword:this.state.inputPassword},n="";n="https://typingtest.jdoyle.ie",T.a.post(n+"/user/login",a,{withCredentials:!0}).then((function(e){localStorage.setItem("beepboop",e.data),t.props.history.push({pathname:"/profile"})})).catch((function(e){t.setState({error:!0})}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:5},c.a.createElement(x.a,null,c.a.createElement(x.a.Group,null,c.a.createElement("h4",null,"Login"),c.a.createElement(x.a.Label,null,"User Name: "),c.a.createElement(x.a.Control,{value:this.state.account_username,id:"inputLoginUserName",onChange:this.onChangeLoginUsername,name:"Username"}),c.a.createElement("br",null),c.a.createElement(x.a.Label,null,"Password: "),c.a.createElement(x.a.Control,{type:"password",value:this.state.account_password,id:"inputLoginPassword",onChange:this.onChangeLoginPassword,name:"Password"})),c.a.createElement(C.a,{type:"submit",variant:"info",onClick:this.login},"Login"),c.a.createElement(p.b,{to:"/account"},c.a.createElement(C.a,{variant:"secondary",style:{marginLeft:10}},"Create Account"))))),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:5},c.a.createElement(k.a,{in:this.state.error},c.a.createElement("div",null,c.a.createElement(A.a,{variant:"danger"},c.a.createElement("p",null,"Username or Password Incorrect"))))))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),D=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).onChangeAccountUsername=n.onChangeAccountUsername.bind(Object(f.a)(n)),n.onChangeAccountEmail=n.onChangeAccountEmail.bind(Object(f.a)(n)),n.onChangeAccountPassword=n.onChangeAccountPassword.bind(Object(f.a)(n)),n.onSubmit=n.onSubmit.bind(Object(f.a)(n)),n.state={account_username:"",account_email:"",account_password:"",account_favourties:[],formErrors:{username:"",email:"",password:""},usernameValid:!1,emailValid:!1,passwordValid:!1,formValid:!1,loggedUser:{},inputLoginPassword:"",inputLoginUserName:""},n}return Object(b.a)(a,[{key:"onChangeAccountUsername",value:function(e){var t=this,a=e.target.name;this.setState({account_username:e.target.value},(function(){t.validateField(a,t.state.account_username)}))}},{key:"onChangeAccountEmail",value:function(e){var t=this,a=e.target.name;this.setState({account_email:e.target.value},(function(){t.validateField(a,t.state.account_email)}))}},{key:"onChangeAccountPassword",value:function(e){var t=this,a=e.target.name;this.setState({account_password:e.target.value},(function(){t.validateField(a,t.state.account_password)}))}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.emailValid,o=this.state.passwordValid,r=this.state.usernameValid;switch(e){case"Email":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=n?"":" is invalid";break;case"Password":o=t.length>=6,a.password=o?"":" is too short";break;case"Username":r=t.length>=4,a.username=r?"":" is too short"}this.setState({formErrors:a,usernameValid:r,emailValid:n,passwordValid:o},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.usernameValid&&this.state.emailValid&&this.state.passwordValid})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={userName:this.state.account_username,userEmail:this.state.account_email,userPassword:this.state.account_password},a="";a="https://typingtest.jdoyle.ie",T.a.post(a+"/user/register",t,{withCredentials:!0}).then((function(e){e.status(400)&&console.log("email in use")})),this.setState={account_username:"",account_email:"",account_password:""},this.props.history.push({pathname:"/login"})}},{key:"componentDidMount",value:function(){localStorage.getItem("beepboop")&&this.props.history.push({pathname:"/profile"})}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:5},c.a.createElement(x.a,null,c.a.createElement(x.a.Group,null,c.a.createElement("h4",null,"Create Account"),c.a.createElement(x.a.Label,null,"User Name: "),c.a.createElement(x.a.Control,{value:this.state.account_username,id:"inputUserName",onChange:this.onChangeAccountUsername,name:"Username"}),c.a.createElement("br",null),c.a.createElement(x.a.Label,null,"Email: "),c.a.createElement(x.a.Control,{value:this.state.account_email,id:"inputUserEmail",onChange:this.onChangeAccountEmail,name:"Email"}),c.a.createElement("br",null),c.a.createElement(x.a.Label,null,"Password: "),c.a.createElement(x.a.Control,{type:"password",value:this.state.account_password,id:"inputPassword",onChange:this.onChangeAccountPassword,name:"Password"})),c.a.createElement(C.a,{type:"submit",variant:"info",onClick:this.onSubmit,disabled:!this.state.formValid},"Create Account"),c.a.createElement(p.b,{to:"/login"},c.a.createElement(C.a,{variant:"secondary",style:{marginLeft:10}},"Login")))),c.a.createElement(j.a,{sm:2}))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),H=a(106),z=a(21),R=a(104),Y=a(107),K=a(86),G=(a(139),a(85)),J=function(e){return c.a.createElement("div",null,c.a.createElement(A.a,{variant:"secondary"},c.a.createElement(p.b,{to:{pathname:"/",state:{id:e.quote._id}},style:{color:"#202326"}},c.a.createElement(A.a.Heading,null,e.quote.quoteTitle," -",e.quote.quoteAuthor)),c.a.createElement("span",null,e.quote.quoteBody),c.a.createElement("hr",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("span",{style:{marginLeft:10}},"Approved : ",String(e.quote.quoteApproved)),c.a.createElement("span",{style:{marginLeft:10}},"Rating : ",e.quote.quoteScore),c.a.createElement("span",{style:{marginLeft:10}},"High Score : ",e.quote.highWPMScore,"WPM ",e.quote.highAccScore,"% Accuracy")),c.a.createElement(j.a,{sm:4},c.a.createElement("div",{style:{float:"right"}},c.a.createElement(A.a.Link,{style:{marginRight:10},onClick:e.edit},"Edit"),c.a.createElement(A.a.Link,{onClick:e.delete},"Delete"))))),c.a.createElement("br",null))},$=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(f.a)(n)),n.getQuotes=n.getQuotes.bind(Object(f.a)(n)),n.deleteAccount=n.deleteAccount.bind(Object(f.a)(n)),n.editAccount=n.editAccount.bind(Object(f.a)(n)),n.approveButton=n.approveButton.bind(Object(f.a)(n)),n.editQuote=n.editQuote.bind(Object(f.a)(n)),n.deleteQuote=n.deleteQuote.bind(Object(f.a)(n)),n.deleteThisQuote=n.deleteThisQuote.bind(Object(f.a)(n)),n.showEditErrors=n.showEditErrors.bind(Object(f.a)(n)),n.handleDeleteAccountClose=n.handleDeleteAccountClose.bind(Object(f.a)(n)),n.handleDeleteQuoteClose=n.handleDeleteQuoteClose.bind(Object(f.a)(n)),n.handleEditQuoteClose=n.handleEditQuoteClose.bind(Object(f.a)(n)),n.saveQuote=n.saveQuote.bind(Object(f.a)(n)),n.validateField=n.validateField.bind(Object(f.a)(n)),n.validateForm=n.validateForm.bind(Object(f.a)(n)),n.onChangeQuoteTitle=n.onChangeQuoteTitle.bind(Object(f.a)(n)),n.onChangeQuoteAuthor=n.onChangeQuoteAuthor.bind(Object(f.a)(n)),n.onChangeQuoteBody=n.onChangeQuoteBody.bind(Object(f.a)(n)),n.handleSelect=n.handleSelect.bind(Object(f.a)(n)),n.state={id:"",username:"",email:"",signUpDate:"",personalBestWPM:0,personalBestAcc:0,quoteIds:[],quotes:[],APIURL:"",unapprovedQuotesCount:0,deleteAccountModal:!1,deleteQuoteModal:!1,editQuoteModal:!1,activeTab:e.activeTab||1,quoteTitleValid:!1,quoteBodyValid:!1,quoteAuthorValid:!1,formValid:!1,formErrors:{quoteTitle:"",quoteBody:"",quoteAuthor:""},editQuote:{quoteTitle:"",quoteAuthor:"",quoteBody:""},deletingQuote:{quoteTitle:""}},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("beepboop"),a="";a="https://typingtest.jdoyle.ie",this.setState({APIURL:"https://typingtest.jdoyle.ie"}),T.a.get(a+"/user/profile",{headers:{"auth-token":t}}).then((function(t){t.data.isAdmin&&localStorage.setItem("nimdAis",t.data.isAdmin);for(var a=[],n=0;n<t.data.latestWPMScores.length;n++)a[n]=40;for(var o=[],r=0;r<t.data.latestAccScores.length;r++)o[r]=92;var s="";console.log(localStorage.getItem("isDarkMode")),s=localStorage.getItem("isDarkMode")?"dark":"light",console.log(s),t.data&&(e.setState({id:t.data._id,username:t.data.userName,email:t.data.userEmail,signUpDate:t.data.signUpDate.slice(0,15),personalBestWPM:t.data.personalBestWPM,personalBestAcc:t.data.personalBestAcc,quoteIds:t.data.quotesAdded,WPMChartConfig:{theme:s,type:"line",title:{text:"Words Per Minute"},height:"60%",legend:{},scaleX:{label:{text:"Typing Tests"}},scaleY:{label:{text:"WPM"}},series:[{values:t.data.latestWPMScores,text:"Your WPM"},{values:a,text:"Avg WPM"}]},AccChartConfig:{theme:s,type:"line",title:{text:"Typing Accuracy % "},height:"70%",legend:{},scaleX:{label:{text:"Typing Tests"}},scaleY:{label:{text:"Accuracy % "}},series:[{values:t.data.latestAccScores,text:"Your Accuracy %"},{values:o,text:"Avg Accuracy %"}]}},(function(){return console.log(e.state.chartConfig)})),e.getQuotes())})),T.a.get(a+"/quotes/unapproved",{headers:{"auth-token":t}}).then((function(t){t.data.length>0?e.setState({unapprovedQuotesCount:t.data.length}):e.setState({unapprovedQuotesCount:null})})).catch((function(e){console.log(e)}))}},{key:"getQuotes",value:function(){var e=this;this.state.quoteIds.length>0&&this.state.quoteIds.forEach((function(t){T.a.get(e.state.APIURL+"/quotes/"+t).then((function(t){t.data&&e.setState({quotes:[].concat(Object(H.a)(e.state.quotes),[t.data])})}))}))}},{key:"quotesComponentsList",value:function(){var e=this.editQuote,t=this.deleteQuote;return this.state.quotes.length>0?this.state.quotes.map((function(a,n){return c.a.createElement(J,{quote:a,key:n,index:n,edit:function(){return e(a)},delete:function(){return t(a)}})})):c.a.createElement(p.b,{to:"/createQuote"},c.a.createElement(C.a,null," Add Some Quotes!"))}},{key:"editQuote",value:function(e){var t=this;this.setState({editQuote:e},(function(){return t.handleEditQuoteClose()}))}},{key:"deleteQuote",value:function(e){var t=this;this.setState({deletingQuote:e},(function(){return t.handleDeleteQuoteClose()}))}},{key:"deleteThisQuote",value:function(){var e=this,t=this.state.deletingQuote,a=localStorage.getItem("beepboop");T.a.post(this.state.APIURL+"/quotes/delete",t,{headers:{"auth-token":a}}).then((function(t){console.log(t.data),e.setState({editQuoteModal:!1}),window.location.reload()})).catch((function(e){return e}))}},{key:"onChangeQuoteTitle",value:function(e){var t=this,a=e.target.name;this.setState({editQuote:Object(v.a)(Object(v.a)({},this.state.editQuote),{},{quoteTitle:e.target.value})},(function(){t.validateField(a,t.state.editQuote.quoteTitle)}))}},{key:"onChangeQuoteAuthor",value:function(e){var t=this,a=e.target.name;this.setState({editQuote:Object(v.a)(Object(v.a)({},this.state.editQuote),{},{quoteAuthor:e.target.value})},(function(){t.validateField(a,t.state.editQuote.quoteAuthor)}))}},{key:"onChangeQuoteBody",value:function(e){var t=this,a=e.target.name;this.setState({editQuote:Object(v.a)(Object(v.a)({},this.state.editQuote),{},{quoteBody:e.target.value})},(function(){t.validateField(a,t.state.editQuote.quoteBody)}))}},{key:"saveQuote",value:function(){var e=this,t=localStorage.getItem("beepboop"),a=this.state.editQuote;console.log(a),console.log(this.state.APIURL),T.a.post(this.state.APIURL+"/quotes/update",a,{headers:{"auth-token":t}}).then((function(t){e.setState({editQuoteModal:!1}),window.location.reload()})).catch((function(e){return e}))}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.quoteTitleValid,o=this.state.quoteBodyValid,r=this.state.quoteAuthorValid;switch(e){case"quoteTitle":n=t.length>=0&&t.length<40,a.quoteTitle=n?"":"Quote Title must not be empty or greater than 20 characters.";break;case"quoteBody":o=t.length>=200&&t.length<=350,a.quoteBody=o?"":"Quote Body is too short";break;case"quoteAuthor":if(0===t.length){r=!0,this.setState((function(e){return{quoteAuthor:e.username}}),(function(){a.quoteAuthor=""}));break}if(t.length<=20){r=!0,a.quoteAuthor=r?"":"Quote Author is short long";break}}this.setState({formErrors:a,quoteTitleValid:n,quoteBodyValid:o,quoteAuthorValid:r},this.validateForm)}},{key:"validateForm",value:function(){console.log(this.state.quoteTitleValid,this.state.quoteAuthorValid,this.state.quoteBodyValid),this.setState({formValid:this.state.quoteTitleValid&&this.state.quoteBodyValid&&this.state.quoteAuthorValid})}},{key:"showEditErrors",value:function(){if(!this.state.formValid)return c.a.createElement(A.a,{variant:"danger"},this.state.formErrors.quoteTitle,this.state.formErrors.quoteAuthor,this.state.formErrors.quoteBody)}},{key:"handleDeleteAccountClose",value:function(){this.setState({deleteAccountModal:!this.state.deleteAccountModal})}},{key:"handleEditQuoteClose",value:function(){this.setState({editQuoteModal:!this.state.editQuoteModal})}},{key:"handleDeleteQuoteClose",value:function(){this.setState({deleteQuoteModal:!this.state.deleteQuoteModal})}},{key:"logout",value:function(){localStorage.removeItem("beepboop"),localStorage.removeItem("nimdAis"),this.props.history.push({pathname:"/login"})}},{key:"deleteAccount",value:function(){var e=localStorage.getItem("beepboop");localStorage.removeItem("beepboop");var t={userName:this.state.username,userEmail:this.state.email};T.a.post(this.state.APIURL+"/user/delete",t,{headers:{"auth-token":e}}),this.props.history.push({pathname:"/login"})}},{key:"editAccount",value:function(){localStorage.getItem("beepboop"),this.state.username,this.state.email,this.state.id;this.props.history.push({pathname:"/editAccount",state:{id:this.state.id}})}},{key:"approveButton",value:function(){if(localStorage.getItem("nimdAis"))return c.a.createElement(p.b,{to:"/approveQuote"},c.a.createElement(C.a,{variant:"outline-success",style:{marginLeft:10}},"Approve Quotes",c.a.createElement(R.a,{variant:"danger",style:{marginLeft:5}},this.state.unapprovedQuotesCount)))}},{key:"handleSelect",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(z.a,{show:this.state.deleteAccountModal,backdrop:"static",keyboard:!1,centered:!0},c.a.createElement(z.a.Header,null,c.a.createElement(z.a.Title,null,"Delete Account?")),c.a.createElement(z.a.Body,null,"Are you sure you want to delete your account? This is not reversable."),c.a.createElement(z.a.Footer,null,c.a.createElement(C.a,{variant:"secondary",onClick:this.handleDeleteAccountClose},"Nevermind"),c.a.createElement(C.a,{variant:"danger",onClick:this.deleteAccount},"Delete Account"))),c.a.createElement(z.a,{show:this.state.deleteQuoteModal,backdrop:"static",keyboard:!1,centered:!0},c.a.createElement(z.a.Header,null,c.a.createElement(z.a.Title,null,"Delete Quote?")),c.a.createElement(z.a.Body,null,"Are you sure you want to delete ",this.state.deletingQuote.quoteTitle,"? This is not reversable and will delete the quotes top score and WPM."),c.a.createElement(z.a.Footer,null,c.a.createElement(C.a,{variant:"secondary",onClick:this.handleDeleteQuoteClose},"Nevermind"),c.a.createElement(C.a,{variant:"danger",onClick:this.deleteThisQuote},"Delete Quote"))),c.a.createElement(z.a,{show:this.state.editQuoteModal,backdrop:"static",keyboard:!1,size:"xl",centered:!0},c.a.createElement(z.a.Header,null,c.a.createElement(z.a.Title,null,"Edit Quote")),c.a.createElement(z.a.Body,null,c.a.createElement("div",null,c.a.createElement(A.a,{variant:"secondary"},c.a.createElement(x.a,null,c.a.createElement(A.a.Heading,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{m:"auto"},c.a.createElement(x.a.Control,{value:this.state.editQuote.quoteTitle,type:"text",size:"lg",onChange:this.onChangeQuoteTitle,name:"quoteTitle"})),c.a.createElement(j.a,{xs:"auto"}," -"),c.a.createElement(j.a,{xs:"auto"},c.a.createElement(x.a.Control,{value:this.state.editQuote.quoteAuthor,type:"text",style:{width:String(this.state.editQuote.quoteAuthor.length)},size:"lg",onChange:this.onChangeQuoteAuthor,name:"quoteAuthor"})))),c.a.createElement(x.a.Control,{value:this.state.editQuote.quoteBody,id:"quoteBody",name:"quoteBody",as:"textarea",rows:"4",onChange:this.onChangeQuoteBody}))),this.showEditErrors())),c.a.createElement(z.a.Footer,null,c.a.createElement(C.a,{variant:"secondary",onClick:this.handleEditQuoteClose},"Nevermind"),c.a.createElement(C.a,{variant:"success",onClick:this.saveQuote,disabled:!this.state.formValid},"Save Quote"))),c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:9},c.a.createElement("h3",null,this.state.username,"'s Profile"),c.a.createElement("h5",null,"Email:  ",this.state.email),c.a.createElement("h5",null,"Date Joined:  ",this.state.signUpDate)),c.a.createElement(j.a,{sm:3},c.a.createElement("h4",null,"Personal Best:"),c.a.createElement(A.a,{variant:"info"},c.a.createElement("span",null,"WPM : ",this.state.personalBestWPM," ",c.a.createElement("br",null),"Accuracy : ",this.state.personalBestAcc,"% ",c.a.createElement("br",null))))),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,c.a.createElement("br",null),c.a.createElement(p.b,{to:"/editAccount"},c.a.createElement(C.a,{variant:"outline-info",onClick:this.editAccount,style:{marginRight:10},disabled:!1},"Edit Account")),c.a.createElement(C.a,{variant:"outline-warning",onClick:this.logout,style:{marginRight:10}},"Logout"),c.a.createElement(C.a,{variant:"outline-danger",onClick:this.handleDeleteQuoteClose},"Delete Account"),this.approveButton())),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,c.a.createElement(Y.a,{className:"tabClass",activeKey:this.state.activeTab,onSelect:this.handleSelect},c.a.createElement(K.a,{eventKey:1,title:"Your Quotes"},c.a.createElement("br",null),c.a.createElement("div",null,this.quotesComponentsList())),c.a.createElement(K.a,{eventKey:2,title:"Your Scores"},c.a.createElement("br",null),c.a.createElement(G.a,{data:this.state.WPMChartConfig}),c.a.createElement(G.a,{data:this.state.AccChartConfig})))))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),X=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).onChangeAccountUsername=n.onChangeAccountUsername.bind(Object(f.a)(n)),n.onChangeAccountEmail=n.onChangeAccountEmail.bind(Object(f.a)(n)),n.onChangeAccountPassword=n.onChangeAccountPassword.bind(Object(f.a)(n)),n.onChangeAccountConfirmPassword=n.onChangeAccountConfirmPassword.bind(Object(f.a)(n)),n.onChangeCurrentPassword=n.onChangeCurrentPassword.bind(Object(f.a)(n)),n.editAccount=n.editAccount.bind(Object(f.a)(n)),n.checkPassword=n.checkPassword.bind(Object(f.a)(n)),n.passwordsMatch=n.passwordsMatch.bind(Object(f.a)(n)),n.validateField=n.validateField.bind(Object(f.a)(n)),n.validateForm=n.validateForm.bind(Object(f.a)(n)),n.state={oldUser:{id:"",userName:"",email:"",password:""},newInput:{userName:"",email:"",password:"",confirmPassword:"",id:""},newUser:{userName:"",email:"",password:""},onChangeCurrentPassword:"",Modal:!0,token:"",authValid:!1,emailValid:!1,passwordValid:!1,usernameValid:!1,formValid:!1,formErrors:{email:"",password:"",username:""}},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("beepboop"),a="";a="https://typingtest.jdoyle.ie",this.setState({APIURL:"https://typingtest.jdoyle.ie"}),T.a.get(a+"/user/profile",{headers:{"auth-token":t}}).then((function(a){a.data&&e.setState({oldUser:{id:a.data._id,userName:a.data.userName,email:a.data.userEmail},token:t})}))}},{key:"editAccount",value:function(){var e=this.state.newInput;console.log(e),""===this.state.newInput.password&&this.passwordsMatch&&(e.password=this.state.oldUser.password),""===this.state.newInput.userName&&(e.userName=this.state.oldUser.userName),""===this.state.newInput.email&&(e.email=this.state.oldUser.email),e.id=this.state.oldUser.id,console.log(e),T.a.post(this.state.APIURL+"/user/update",e,{headers:{"auth-token":this.state.token}}).then((function(e){console.log(e.data)})).catch((function(e){return e}))}},{key:"onChangeAccountUsername",value:function(e){var t=this,a=e.target.name;this.setState({newInput:{userName:e.target.value,email:this.state.newInput.email,password:this.state.newInput.password,confirmPassword:this.state.newInput.confirmPassword}},(function(){t.validateField(a,t.state.newInput.userName)}))}},{key:"onChangeAccountEmail",value:function(e){var t=this,a=e.target.name;this.setState({newInput:{email:e.target.value,userName:this.state.newInput.userName,password:this.state.newInput.password,confirmPassword:this.state.newInput.confirmPassword}},(function(){t.validateField(a,t.state.newInput.email)}))}},{key:"onChangeAccountPassword",value:function(e){var t=this,a=e.target.name;this.setState({newInput:{password:e.target.value,confirmPassword:this.state.newInput.confirmPassword,userName:this.state.newInput.userName,email:this.state.newInput.email}},(function(){t.validateField(a,t.state.newInput.password)}))}},{key:"onChangeAccountConfirmPassword",value:function(e){e.target.name;this.setState({newInput:{confirmPassword:e.target.value,userName:this.state.newInput.userName,email:this.state.newInput.email,passowrd:this.state.newInput.password}})}},{key:"onChangeCurrentPassword",value:function(e){e.target.name;this.setState({onChangeCurrentPassword:e.target.value})}},{key:"validateField",value:function(e,t){console.log(t);var a=this.state.formErrors,n=this.state.emailValid,o=this.state.passwordValid,r=this.state.usernameValid;switch(e){case"Email":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=n?"":" is invalid";break;case"Password":o=t.length>=6,a.password=o?"":" is too short";break;case"Username":r=t.length>=4,a.username=r?"":" is too short"}this.setState({formErrors:a,usernameValid:r,emailValid:n,passwordValid:o},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.usernameValid&&this.state.emailValid&&this.state.passwordValid})}},{key:"checkPassword",value:function(){var e=this,t={userName:this.state.oldUser.userName,userPassword:this.state.onChangeCurrentPassword};this.setState((function(e){return{oldUser:Object(v.a)(Object(v.a)({},e.oldUser),{},{password:t.userPassword})}})),T.a.post(this.state.APIURL+"/user/login",t,{withCredentials:!0}).then((function(t){t.data?e.setState({Modal:!1}):console.log("error")})).catch((function(t){e.setState({authValid:!0})}))}},{key:"passwordsMatch",value:function(){return this.state.newPassword===this.state.newConfirmPassowrd}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(z.a,{show:this.state.Modal,backdrop:"static",keyboard:!1,centered:!0},c.a.createElement(z.a.Header,null,c.a.createElement(z.a.Title,null,"Enter your current Password")),c.a.createElement(z.a.Body,null,"Enter your current password to edit your Account.",c.a.createElement(x.a,null,c.a.createElement(x.a.Control,{value:this.state.onChangeCurrentPassword,type:"password",id:"inputUserName",onChange:this.onChangeCurrentPassword,name:"Username",isInvalid:this.state.authValid}))),c.a.createElement(z.a.Footer,null,c.a.createElement(p.b,{to:"/profile"},c.a.createElement(C.a,{variant:"secondary",onClick:this.handleClose},"Nevermind")),c.a.createElement(C.a,{variant:"danger",onClick:this.checkPassword},"Edit Account"))),c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:5},c.a.createElement(x.a,null,c.a.createElement(x.a.Group,null,c.a.createElement("h4",null,"Edit Account"),c.a.createElement(x.a.Label,null,"User Name:"),c.a.createElement(x.a.Control,{value:this.state.newInput.userName,id:"inputUserName",onChange:this.onChangeAccountUsername,name:"Username",placeholder:this.state.oldUser.userName,isValid:this.state.usernameValid}),c.a.createElement("br",null),c.a.createElement(x.a.Label,null,"Email: "),c.a.createElement(x.a.Control,{value:this.state.newInput.email,id:"inputUserEmail",onChange:this.onChangeAccountEmail,name:"Email",placeholder:this.state.oldUser.email,isValid:this.state.emailValid}),c.a.createElement("br",null),c.a.createElement(x.a.Label,null,"Password: "),c.a.createElement(x.a.Control,{type:"password",value:this.state.newInput.password,id:"inputPassword",onChange:this.onChangeAccountPassword,name:"Password",isValid:this.state.passwordValid}),c.a.createElement(x.a.Label,null,"Confirm Password: "),c.a.createElement(x.a.Control,{type:"password",value:this.state.newInput.confirmPassword,id:"inputConfirmPassword",onChange:this.onChangeAccountConfirmPassword,name:"ConfirmPassword"})),c.a.createElement(p.b,{to:"/profile"},c.a.createElement(C.a,{variant:"secondary",style:{marginRight:10}},"Cancel")),c.a.createElement(C.a,{variant:"info",onClick:this.editAccount},"Save"))))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),Z=P.b.input.attrs((function(e){return{type:"text",placeholder:" Search: Title, Author, User"}}))(s||(s=Object(w.a)(["\n    background: white;\n    border-radius: 5px;\n    border: 1px solid darkgray;\n    height : 35px;\n    margin-left : 80px;\n    width : 230px;\n    float: right;\n    :: disabled\n"]))),ee=function(e){return c.a.createElement("div",null,c.a.createElement(A.a,{variant:"secondary"},c.a.createElement(p.b,{to:{pathname:"/",state:{id:e.quote._id}},style:{color:"#202326"}},c.a.createElement(A.a.Heading,null,e.quote.quoteTitle," -",e.quote.quoteAuthor)),c.a.createElement("span",null,e.quote.quoteBody),c.a.createElement("hr",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("span",null,"Added by: ",c.a.createElement(A.a.Link,null,e.quote.quoteUser)),c.a.createElement("span",{style:{marginLeft:10}},"Approved : ",String(e.quote.quoteApproved)),c.a.createElement("span",{style:{marginLeft:10}},"Rating : ",e.quote.quoteScore),c.a.createElement("span",{style:{marginLeft:10}},"High Score : ",e.quote.highWPMScore,"WPM ",e.quote.highAccScore,"% Accuracy")),c.a.createElement(j.a,{sm:4},c.a.createElement("div",{style:{float:"right"}},c.a.createElement(C.a,{variant:"success",style:{marginRight:5},onClick:e.approve},"Approve"),c.a.createElement(C.a,{variant:"danger",onClick:e.del},"Delete"))))),c.a.createElement("br",null))},te=function(e){Object(y.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).search=n.search.bind(Object(f.a)(n)),n.quotesList=n.quotesList.bind(Object(f.a)(n)),n.approveQuote=n.approveQuote.bind(Object(f.a)(n)),n.deleteQuote=n.deleteQuote.bind(Object(f.a)(n)),n.noQuotes=n.noQuotes.bind(Object(f.a)(n)),n.state={quotes:[],search:"",token:"",APIURL:""},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("beepboop"),a="";a="https://typingtest.jdoyle.ie",this.setState({APIURL:"https://typingtest.jdoyle.ie"}),T.a.get(a+"/quotes/unapproved",{headers:{"auth-token":t}}).then((function(t){e.setState({quotes:t.data,token:localStorage.getItem("beepboop")})})).catch((function(e){console.log(e)}))}},{key:"quotesList",value:function(e){var t=this.approveQuote,a=this.deleteQuote;return e.map((function(e,n){return c.a.createElement(ee,{quote:e,key:n,index:n,approve:function(){return t(e)},del:function(){return a(e)}})}))}},{key:"search",value:function(){this.setState({search:document.getElementById("searchBar").value})}},{key:"approveQuote",value:function(e){var t=this;console.log(e),T.a.post(this.state.APIURL+"/quotes/approve",e,{headers:{"auth-token":this.state.token}}).then((function(e){console.log(e.data),t.setState({quotes:[]})})),console.log(e.quoteApproved)}},{key:"deleteQuote",value:function(){console.log("Delete")}},{key:"noQuotes",value:function(){if(0===this.state.quotes.length)return c.a.createElement("span",null,"No quotes to approve!")}},{key:"render",value:function(){var e=this,t=this.state.quotes.filter((function(t){return-1!==t.quoteTitle.toLowerCase().indexOf(e.state.search)||-1!==t.quoteAuthor.toLowerCase().indexOf(e.state.search)||-1!==t.quoteUser.indexOf(e.state.search)}));return c.a.createElement("div",{className:"container"},c.a.createElement(B,null,c.a.createElement(Q.a,null,c.a.createElement(j.a,{sm:8},c.a.createElement("h4",null," Approve Quotes")),c.a.createElement(j.a,{sm:4},c.a.createElement(Z,{id:"searchBar",onChange:this.search}))),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,c.a.createElement(p.b,{to:"/profile"},c.a.createElement(C.a,{variant:"info"},"Back to Profile")))),c.a.createElement("br",null),c.a.createElement(Q.a,null,c.a.createElement(j.a,null,this.quotesList(t),this.noQuotes()))),c.a.createElement("div",{style:{height:800}}))}}]),a}(u.Component),ae=a(108),ne=function(e){var t=e.component,a=Object(ae.a)(e,["component"]);return c.a.createElement(g.b,Object.assign({},a,{render:function(e){return localStorage.getItem("nimdAis")?c.a.createElement(t,e):c.a.createElement(g.a,{to:"/profile"})}}))},oe=(a(140),a(79)),re=a(60),se=a(59),le={colors:{background:"white",cardBackground:"#F5FFFA",buttonBackground:"#5E81AC",textColor:"black",buttonColor:"ECEFF4"}},ie={colors:{background:"#343A40",cardBackground:"#3B4252",buttonBackground:"#d08770",textColor:"#ECEFF4",buttonColor:"#2E3440"}},ue=P.b.div(l||(l=Object(w.a)(["\n    background: ",";\n    color: ",";\n    align-items: center;\n    justify-content: center;\n    padding: 0px;\n\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.textColor})),ce=P.b.svg(i||(i=Object(w.a)(['\n width : 30px;\n height : 30px;\n alt="Typing Test;\n']))),de=function(e){e.className;return c.a.createElement(ce,{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-keyboard-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M0 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm13 .25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-.5zM2.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 3 8.75v-.5A.25.25 0 0 0 2.75 8h-.5zM4 8.25A.25.25 0 0 1 4.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 4 8.75v-.5zM6.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 7 8.75v-.5A.25.25 0 0 0 6.75 8h-.5zM8 8.25A.25.25 0 0 1 8.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 8 8.75v-.5zM13.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zm0 2a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zm-3-2a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h1.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-1.5zm.75 2.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-.5zM11.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zM9 6.25A.25.25 0 0 1 9.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 9 6.75v-.5zM7.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 8 6.75v-.5A.25.25 0 0 0 7.75 6h-.5zM5 6.25A.25.25 0 0 1 5.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 5 6.75v-.5zM2.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h1.5A.25.25 0 0 0 4 6.75v-.5A.25.25 0 0 0 3.75 6h-1.5zM2 10.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-.5zM4.25 10a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h5.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-5.5z"}))},he=function(){var e=localStorage.getItem("isDarkMode"),t=Object(u.useState)("true"===e),a=Object(m.a)(t,2),n=a[0],o=a[1];return c.a.createElement(P.a,{theme:n?ie:le},c.a.createElement(ue,null,c.a.createElement(p.a,null,c.a.createElement("div",{className:"container"},c.a.createElement(oe.a,{collapseOnSelect:!0,expand:"lg",bg:n?"dark":"light",variant:n?"dark":"light",sticky:"top"},c.a.createElement(se.a,null,c.a.createElement(de,null)),c.a.createElement(se.a,null,"Typing Test"),c.a.createElement(oe.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),c.a.createElement(oe.a.Collapse,{id:"responsive-navbar-nav"},c.a.createElement(re.a,{className:"mr-auto"},c.a.createElement(p.b,{to:"/",className:"nav-link",id:"navBarText"},"Test"),c.a.createElement(p.b,{to:"/quotes",className:"nav-link"},"Quotes"),c.a.createElement(p.b,{to:"/createQuote",className:"nav-link"},"Create Quote"),c.a.createElement(p.b,{to:"/account",className:"nav-link"},"Account")),c.a.createElement(re.a,null,c.a.createElement(C.a,{variant:"outline-secondary",onClick:function(){o(!n),localStorage.setItem("isDarkMode",!n)}},c.a.createElement("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-circle-half",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M8 15V1a7 7 0 1 1 0 14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"}))))))),c.a.createElement(g.b,{path:"/",exact:!0,component:I}),c.a.createElement(g.b,{path:"/createQuote",component:U}),c.a.createElement(g.b,{path:"/quotes",component:F}),c.a.createElement(g.b,{path:"/login",component:W}),c.a.createElement(g.b,{path:"/account",exact:!0,component:D}),c.a.createElement(g.b,{path:"/profile",component:$}),c.a.createElement(g.b,{path:"/editAccount",component:X}),c.a.createElement(ne,{path:"/approveQuote",component:te,exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.5d671ee4.chunk.js.map